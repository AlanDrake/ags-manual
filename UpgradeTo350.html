<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Upgrading to 3.5.0</title>
  <link rel="stylesheet" href="css/normalize.css" />
  <link rel="stylesheet" href="css/milligram.min.css" />
  <link rel="stylesheet" href="css/main.css" />
  <link href="static/favicon.ico" rel="icon" type="image/x-icon" />
</head>
<body>


  <div class="container">
    <nav class="navigation">
      <section class="container">
        <div class="float-left">
          <a class="navigation-title" href="index.html">
            <svg id="cup" width="72" height="48" viewBox="0 0 12 8" preserveAspectRatio="xMidYMid meet">
              <g shape-rendering="crispEdges">
                <rect width="10" height="7" fill="#ffffff" />
                <svg y="1">
                  <rect width="12" height="5" fill="#ffffff" />
                </svg>
                <svg x="1">
                  <rect width="8" height="8" fill="#ffffff" />
                </svg>
                <svg x="1" y="1">
                  <rect width="8" height="5" fill="#2a7fff" />
                </svg>
                <svg x="2" y="6">
                  <rect width="6" height="1" fill="#2a7fff" />
                </svg>
                <svg x="9" y="2">
                  <rect width="2" height="3" fill="#2a7fff" />
                </svg>
                <svg x="9" y="3">
                  <rect width="1" height="1" fill="#ffffff" />
                </svg>
                <svg x="2" y="2">
                  <rect width="6" height="3" fill="#0000d4" />
                </svg>
                <svg x="3" y="5">
                  <rect width="4" height="1" fill="#0000d4" />
                </svg>
                <svg x="2" y="1">
                  <rect width="6" height="1" fill="#ffffff" />
                </svg>
              </g>
            </svg>
            <h1 class="title">AGS Manual</h1>
          </a>
        </div>
        <div class="float-right">
          <ul class="navigation-list float-right">
            <li class="navigation-item">
              <input type="search" id="search_input">
            </li>
          </ul>
        </div>
      </section>
    </nav>

    <header>
      <ul id="search_results">
      </ul>
    </header>

    <section>
      <div class="row">
        <div class="column">
          <nav id="TOC">
            <ul>
              <li><a href="genindex.html">Index</a></li>
            </ul>
<ul>
<li><a href="#upgrading-to-350"><span>Upgrading to 3.5.0</span></a></li>
</ul>
          </nav>
        </div>
        <div class="column column-75">
<section id="upgrading-to-350" class="level2">
<h2><a href="#upgrading-to-350">Upgrading to 3.5.0</a></h2>
<p>3.5.0 is another big update and it has few serious changes to both editor UI and scripting.</p>
<p><strong>Room editor and multilayer mode</strong></p>
<p>Room editor has got a new navigation bar on the top of the panel instead of the plain drop-down list where you used to select edit mode. This navigation bar lets you do the following:</p>
<ul>
<li>See the full list of elements grouped into layers by type (characters, objects, edges and so forth).</li>
<li>Select editing mode, and the particular item for edit.</li>
<li>Toggle each group's and even each item's visibility in any combinations. This lets you display, for example, characters, objects and walkable areas at the same time. The only exception is that you may only display one type of area mask at the same time (that is - either walkable areas, regions, hotspots or walk-behinds).</li>
<li>Toggle each group's and each item's locked state. When locked the object cannot be moved or have its shape changed (as with mask areas which may be changed by painting).</li>
</ul>
<p>Note that you can still only select and edit objects of the chosen group, not all at once.</p>
<p><strong>New Viewport/Camera system</strong></p>
<p>In the past, AGS had a very simple concept of Viewport: a rectangular "eye" which selected a part of the room to display on the screen. If a room was larger than the game's screen it became a "scrolling room" and you could move a viewport around it, showing different parts of that room.</p>
<p>In 3.5.0 the concept of viewport has changed a lot to provide more options. First of all, it's now split into two parts: Viewport and Camera.</p>
<p>The new Camera is almost what the old Viewport was: it is a rectangle <em>inside the room</em> that acts like an "eye" and tells which part of this room can be seen. Camera's position and size are defined in <em>room coordinates</em>. If Camera is smaller than the room, then it can be moved around it to see different parts.<br> The new Viewport is a different thing, now it defines a rectangle <em>on a game's screen</em> where the room will be drawn. Viewport has a link to Camera and displays what camera "sees" at this moment. Viewport's position and size are defined in <em>screen coordinates</em>, just like GUIs and Overlays. This means that if a camera is moving inside the room, the viewport will still stay at the same place on the screen, and vice-versa when a viewport is moved around the screen it will still display same part of the room. Of course, moving both viewport and camera will produce more complicated result.<br> You may think of Viewport as of a TV screen or computer monitor, which translates the image from the camera.</p>
<p>Introduction of new Viewport and Camera concepts allows a lot of new effects which were previously impossible or not easy to accomplish. For example, you no longer must display the room covering the whole screen, you may make a smaller "window" to see the room and position it in the middle of the screen.<br> By the way, this also means that you do not have to keep all your rooms same size, you may create very small rooms in your game now and adjust viewport and camera to display it on screen where and how you like.<br> By default Viewport and Camera has the same size, but you may make them have different sizes. If a camera is smaller than the viewport then its image will be stretched to fill it causing a "zoom-in" effect. If the camera is larger than the viewport then it will be shrunk to fit in causing a "zoom-out" effect.</p>
<p>The first viewport-camera pair is created automatically when the game starts, but you may create more of them. Viewport's and camera's parameters may be changed anytime, thus you may have different settings per each room and even animations (like moving viewport and camera around, zooming in and out).</p>
<p>It's important to note that any cursor actions will only work on the room if the cursor is on a viewport.</p>
<p>Only rooms and their contents (characters, objects) are affected by the viewport/camera system, and they got GetAtRoomXY and GetAtScreenXY functions to help scripting your game systems. GUI and Overlays, including speech and other on-screen text, still work outside of it.</p>
<p>For more information see: <a href="Camera.html">Camera</a>, <a href="Viewport.html">Viewport</a>, <a href="Game.html#cameras">Game.Cameras</a>, <a href="Screen.html#viewports">Screen.Viewports</a></p>
<p><strong>Room sizes and mask resolution</strong></p>
<p>Previously AGS had a restriction that a room background must be at least size of a game resolution. With 3.5.0 this restriction is gone and you can now make rooms any size. This became possible after the rewrite of the viewport system, as explained above.</p>
<p>Another change is related to the room masks that define walkable areas, hotspots and so forth. Historically only walk-behinds mask was always made equal to the size of room background. Other masks were 1:1 to room background's size only in "low-res" games (below 640x400). In "high-res" games (640x400 and above) hotspots, regions and walkable masks were made x2 smaller resolution than the room, which means that for 4 room pixels (2x2 square) there was 1 mask pixel. That, in turn, caused these masks to be less precise. Originally this was done to reduce both memory size of a room and speed up any operations run against these masks, such as pathfinding, but sometimes annoyed users who were unable to draw exactly a region they want.</p>
<p>Since 3.5.0 each room has a property called MaskResolution which currently ranges from 1:1 to 1:4. This resolution determines the resolution factor for hotspots, regions and walkable masks (but not walk-behinds which is still fixed at 1:1). Default is 1:1, but you may change it anytime for any individual room if you prefer your room to have <em>less precise</em> area masks.<br> To make things more convenient there's also an option in General Settings called "Default mask resolution" which lets you choose a value that will be applied to every newly created room.<br> Note that when importing older projects the mask resolution is kept unchanged.</p>
<p><strong>Deprecated relative asset resolutions</strong></p>
<p>This is something users do not know much about now but may stumble upon sometimes. In the long past AGS divided all games into "low-resolution" and "high-resolution" games, "high-res" was defined roughly as 640x400 and higher while "low-res" was 320x200 or 320x240. Similarily AGS allowed certain assets, such as sprites, fonts, and rooms, be tagged as "low-res" or "high-res". The idea behind this was that if a "low-res" asset is used in a "high-res" game then it gets automatically scaled up x2, and vice-versa a "high-res" asset in a "low-res" game would be downscaled x2.</p>
<p>Although such practice is not commonly used for a while, you could still experience this effect if you, for example, take game template or project made in low resolution and convert it to high resolution. Some sprites from the original game which were marked as "low-res" will be scaled up. Sometimes this behavior may be useful - in case you are using these sprites as placeholders but may confuse inexperienced users.</p>
<p>In AGS 3.5.0 we are deprecating concept of resolution tags and disable these conversions <em>by default</em>. We also make asset scaling more explicit in an attempt to prevent its misuse.</p>
<ol>
<li><p>Rooms no longer have a resolution tag and are always considered having "real" resolution. This is only relevant if you are upgrading from pre-AGS 3.0 era. If you import 2.72 games into AGS 3.5.0 your rooms will get resized to match game resolution (unless they already do).</p></li>
<li><p>Sprites retain resolution tag for backward compatibility, but it is now set to "Real" by default and not recommended to change. When you import older project sprites get "promoted" to "real" resolution if their tag matches the game: for example if a sprite is tagged as "low-res" and your game is 320x200, or if a sprite is tagged as "high-res" and your game is 640x400 or higher.</p></li>
<li><p>"Fonts designed for high resolution" setting was removed because it no longer makes sense. Instead, each font has an individual ScalingMultiplier property. When importing older project each font will be scaled x2 if it was a "high-res" game and this setting was OFF.</p></li>
</ol>
<p><strong>New API cheat sheet</strong></p>
<p>Some functions from previous Script API can be easily replaced, they are shown in the table below.</p>
<table>
<thead>
<tr class="header">
<th>obsolete function</th>
<th>replace with</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SetViewport(x, y);</td>
<td>Game.Camera.SetAt(x, y);</td>
</tr>
<tr class="even">
<td>ReleaseViewport();</td>
<td>Game.Camera.AutoTracking = true;</td>
</tr>
<tr class="odd">
<td>GetViewportX();</td>
<td>Game.Camera.X;</td>
</tr>
<tr class="even">
<td>GetViewportY();</td>
<td>Game.Camera.Y;</td>
</tr>
<tr class="odd">
<td>GetWalkableAreaAt(x, y);</td>
<td>GetWalkableAreaAtScreen(x, y);</td>
</tr>
</tbody>
</table>
<p>You can also use "Script Compatibility Level" switch to enable old functions.</p>
<p><strong>System limits update</strong></p>
<p>This version's compiled game, sprite set, and room files now may exceed 2 GB.</p>
<p>Additionally, imported sprites count limit were raised to 90000 and Dynamic Sprites count limit are removed. ListBox item count limit, Button length limit, TextBox length limit, and font count limit are also removed.</p>
</section>
        </div>
      </div>
    </section>
  </div>


  <footer>
    <section class="container">
      <p>Build: 09/22/2019 11:22:09 PM</p>
    </section>
  </footer>

  <script type="text/javascript" src="js/search.js"></script>
</body>
</html>
