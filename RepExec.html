<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>repeatedly_execute (_always) &#8212; AGSHelp 3.4.1 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          AGS Manual</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="http://adventuregamestudio.co.uk/forums/index.php">AGS Forums</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">AGS Manual <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tutorial.html">Tutorial</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="EditorRoom.html">Room Editor</a><ul>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#background">Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#show-this-room-s-control">Show this room’s control</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#properties-control">Properties control</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#edges">Edges</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#characters">Characters</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#objects">Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#hotspot">Hotspot</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#walkable-areas">Walkable areas</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#walk-behinds">Walk-behinds</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#regions">Regions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="EditorCharacter.html">Character Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="EditingGUIs.html">GUI Editor</a><ul>
<li class="toctree-l2"><a class="reference internal" href="EditingGUIs.html#gui-buttons">GUI buttons</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditingGUIs.html#interface-text">Interface text</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditingGUIs.html#customized-text-windows">Customized Text Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditingGUIs.html#custom-inventory">Custom inventory</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditingGUIs.html#sliders">Sliders</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditingGUIs.html#text-boxes">Text Boxes</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditingGUIs.html#list-boxes">List Boxes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="EditorSprite.html">Sprite Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="EditorView.html">View Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="EditorInventoryItems.html">Inventory Items Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="OtherFeatures.html">Other Features</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="RuntimeEngine.html">The run-time engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="GraphicsDriver.html">Graphics driver selection</a></li>
<li class="toctree-l1"><a class="reference internal" href="Setup.html">Engine Setup Program</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ScriptingLanguage.html">Scripting Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="Scripting.html">Scripting Api</a></li>
<li class="toctree-l1"><a class="reference internal" href="Reference.html">Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="UpgradingFromPreviousVersion.html">Upgrading from a previous version</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Copyright.html">Copyright and terms of use</a></li>
<li class="toctree-l1"><a class="reference internal" href="AnonymousUsageInfo.html">Anonymous usage information</a></li>
<li class="toctree-l1"><a class="reference internal" href="Credits.html">Credits</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ContactingTheDevelopers.html">Contacting the developers</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">repeatedly_execute (_always)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/RepExec.md.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="repeatedly-execute-always">
<span id="repeatedly-execute-always"></span><h1>repeatedly_execute (_always)<a class="headerlink" href="#repeatedly-execute-always" title="Permalink to this headline">¶</a></h1>
<p>One of the most common things you’ll need to do when scripting is to
check if something has happened in the game – and if so, then make the
game do something in response.</p>
<p>For example, suppose that you want a bird to fly backwards and forwards
across the screen in the background. You need a way of telling the bird
to move in one direction, recognise when it has finished, and tell it to
move back again.</p>
<p>This is where <em>repeatedly_execute</em>, <em>repeatedly_execute_always</em> and
<em>late_repeatedly_execute_always</em> come in.</p>
<p><strong>What’s the difference between them?</strong></p>
<p>The <em>repeatedly_execute</em> event is run on every game loop (by default
this is 40 times per second), but only when the game is not blocked.
That means that it will run as long as there are no current blocking
animations or moves going on (ie. a Walk or Animate command where
<em>eBlock</em> has been specified as a parameter).</p>
<p>On the other hand, <em>repeatedly_execute_always</em> and
<em>late_repeatedly_execute_always</em> are always run on every game loop,
no matter whether the game is blocked or not. This comes at a price
though, which is that you cannot run any blocking code within it. So if
you try to script a <em>player.Walk()</em> command that passes the <em>eBlock</em>
parameter – or even just try to use a <code class="docutils literal notranslate"><span class="pre">Wait(1);</span></code> command, these will
fail within <em>(late_)repeatedly_execute_always</em>.</p>
<p>The difference between <em>repeatedly_execute_always</em> and
<em>late_repeatedly_execute_always</em> is that first is run <strong>before</strong> game
updates itself, changing animation frames, moving objects into new
position etc, while the second, “late” version, is run <strong>after</strong> the
game was updated, but before it redrew its new state on screen.</p>
<p><strong>What would I use each one for?</strong></p>
<p>You would usually use <em>repeatedly_execute</em> for doing things that affect
the player character, and <em>repeatedly_execute_always</em> for doing
background tasks that don’t directly affect the player.</p>
<p>For example, if your game kept track of the player’s hunger, you might
want to check in <em>repeatedly_execute</em> how long it has been since he
last ate – and if it has been more than 20 minutes, make the player
character stop walking and rub his stomach. Because you want to perform
a blocking animation, and you wouldn’t want this to interrupt any
specific cutscenes that were going on, repeatedly_execute would be the
ideal place for it.</p>
<p>On the other hand, in the case of our bird flying across the screen,
because we don’t want to block the game while the bird flies, and we
just want it to happen in the background, <em>repeatedly_execute_always</em>
would be the place to put it.</p>
<p>The <em>late_repeatedly_execute_always</em> is used in similar way to its
“earlier” counterpart, but it may be essential if you need to precisely
keep track of a game object movement. When
<em>late_repeatedly_execute_always</em> is called all the objects are
already updated to their new states, therefore you will have accurate
information about them. On contrary, the <em>repeatedly_execute_always</em>
will always be “one step behind” of the game state.</p>
<p>In a nutshell, if you need to do something right before game state
changes, use <em>repeatedly_execute_always</em>, if you need to do something
right after game state has changed, use
<em>late_repeatedly_execute_always</em>.</p>
<p><strong>How do I create them?</strong></p>
<p>In main game scripts, you create your <em>repeatedly_execute</em> script
function by just pasting it into the script as follows. In the
GlobalScript.asc it is already created for you:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">function</span> <span class="n">repeatedly_execute</span><span class="p">()</span>
<span class="p">{</span>
  <span class="o">//</span> <span class="n">Put</span> <span class="n">your</span> <span class="n">script</span> <span class="n">code</span> <span class="n">here</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In rooms, it is slightly different. If you want to run some script that
is specific to a particular room, open that room’s Events Pane and
you’ll see a “Repeatedly execute” event. Click the “…” button and a
function called something like <em>Room_RepExec</em> will be created for you.</p>
<p>This is important to remember – in a room script, <strong>you cannot simply
paste in a repeatedly_execute function</strong>; you need to use the Events
Pane to create it instead.</p>
<p>To create <em>repeatedly_execute_always</em>, you can simply paste it into
the script as above – but you can also paste it into room scripts.
Therefore the following will work in any script, whether it be a room or
a global script.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">function</span> <span class="n">repeatedly_execute_always</span><span class="p">()</span>
<span class="p">{</span>
  <span class="o">//</span> <span class="n">Put</span> <span class="n">your</span> <span class="n">script</span> <span class="n">code</span> <span class="n">here</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Remember, of course, that RepExec or <em>repeatedly_execute_always</em>
functions in a room script will only be run while the player is actually
in that room!</p>
<p><strong>Can you show me an example?</strong></p>
<p>Let’s implement the two things we just talked about. Here’s our hunger
checking code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">function</span> <span class="n">repeatedly_execute</span><span class="p">()</span>
<span class="p">{</span>
  <span class="o">//</span> <span class="n">increment</span> <span class="n">our</span> <span class="n">timer</span> <span class="n">variable</span> <span class="p">(</span><span class="n">we</span> <span class="n">would</span> <span class="n">have</span> <span class="n">created</span> <span class="n">this</span>
  <span class="o">//</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">Global</span> <span class="n">Variables</span> <span class="n">editor</span><span class="p">)</span>
  <span class="n">hungerTimer</span><span class="o">++</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">hungerTimer</span> <span class="o">==</span> <span class="mi">800</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">Display</span><span class="p">(</span><span class="s2">&quot;You are getting very hungry.&quot;</span><span class="p">);</span>
    <span class="n">player</span><span class="o">.</span><span class="n">LockView</span><span class="p">(</span><span class="n">RUBSTOMACH</span><span class="p">);</span>
    <span class="n">player</span><span class="o">.</span><span class="n">Animate</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">eOnce</span><span class="p">,</span> <span class="n">eBlock</span><span class="p">,</span> <span class="n">eForwards</span><span class="p">);</span>
    <span class="n">player</span><span class="o">.</span><span class="n">UnlockView</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and let’s put the bird flying code in the room script, because we only
want it to happen in that one room:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>function repeatedly_execute_always()
{
  if (!cBird.Moving)
  {
    if (cBird.x &lt; 100)
    {
      // if the bird is on the left hand side of the screen,
      // start it moving towards the right
      cBird.Walk(400, cBird.y, eNoBlock, eAnywhere);
    }
    else
    {
      // otherwise, move it towards the left
      cBird.Walk(0, cBird.y, eNoBlock, eAnywhere);
    }
  }
}
</pre></div>
</div>
</div>


    </div>
      
  </div>
</div>
    

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018, AGS Team.<br/>
      Last updated on Jul 29, 2018, 3:26:19 PM.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.<br/>
    </p>
  </div>
</footer>
    

  </body>
</html>