<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Music and sound &#8212; AGSHelp 3.4.1 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          AGS Manual</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="http://adventuregamestudio.co.uk/forums/index.php">AGS Forums</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">AGS Manual <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tutorial.html">Tutorial</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="EditorRoom.html">Room Editor</a><ul>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#background">Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#show-this-room-s-control">Show this room’s control</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#properties-control">Properties control</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#edges">Edges</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#characters">Characters</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#objects">Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#hotspot">Hotspot</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#walkable-areas">Walkable areas</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#walk-behinds">Walk-behinds</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#regions">Regions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="EditorCharacter.html">Character Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="EditingGUIs.html">GUI Editor</a><ul>
<li class="toctree-l2"><a class="reference internal" href="EditingGUIs.html#gui-buttons">GUI buttons</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditingGUIs.html#interface-text">Interface text</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditingGUIs.html#customized-text-windows">Customized Text Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditingGUIs.html#custom-inventory">Custom inventory</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditingGUIs.html#sliders">Sliders</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditingGUIs.html#text-boxes">Text Boxes</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditingGUIs.html#list-boxes">List Boxes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="EditorSprite.html">Sprite Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="EditorView.html">View Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="EditorInventoryItems.html">Inventory Items Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="OtherFeatures.html">Other Features</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="RuntimeEngine.html">The run-time engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="GraphicsDriver.html">Graphics driver selection</a></li>
<li class="toctree-l1"><a class="reference internal" href="Setup.html">Engine Setup Program</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ScriptingLanguage.html">Scripting Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="Scripting.html">Scripting Api</a></li>
<li class="toctree-l1"><a class="reference internal" href="Reference.html">Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="UpgradingFromPreviousVersion.html">Upgrading from a previous version</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Copyright.html">Copyright and terms of use</a></li>
<li class="toctree-l1"><a class="reference internal" href="AnonymousUsageInfo.html">Anonymous usage information</a></li>
<li class="toctree-l1"><a class="reference internal" href="Credits.html">Credits</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ContactingTheDevelopers.html">Contacting the developers</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Music and sound</a><ul>
<li><a class="reference internal" href="#voice-speech">Voice speech</a></li>
<li><a class="reference internal" href="#the-audiocache-folder">The AudioCache folder</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/MusAndSound.md.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="music-and-sound">
<span id="music-and-sound"></span><h1>Music and sound<a class="headerlink" href="#music-and-sound" title="Permalink to this headline">¶</a></h1>
<p>Sound and music are an essential part of any gameplay experience, and
AGS 3.2 and higher provides a re-written audio system giving you full
control over your game audio.</p>
<p><strong>File formats</strong></p>
<p>AGS is able to play the following types of audio file: OGG, MP3, MIDI,
WAV (uncompressed), MOD, XM, IT, S3M and VOC.</p>
<p>The only limitation to this is that AGS is only able to play one MIDI
file at a time. If you attempt to play two simulataneous MIDI music
files, the first one will be cut off when the second one starts playing.</p>
<p>If you haven’t heard of OGG before, it’s a digital music format, similar
to MP3, but achieving better compression and higher quality. More
importantly, it is a totally free format so no royalty payments or
licenses are required to use it. For more information and programs to
encode your music to OGG, see http://www.vorbis.org/</p>
<p><strong>Audio in the Editor</strong></p>
<p>Look under the “Audio” branch in the project tree. Here you’ll find
sub-nodes called “Speech”, “Types” and two default folders called
“Music” and “Sounds”.</p>
<p><strong>Speech</strong></p>
<p>At the moment, voice speech files are not setup within the editor. See
the <a class="reference external" href="#voice-speech">Speech</a> help page to find out more about
adding speech to your game.</p>
<p><strong>Audio Types</strong></p>
<p>Audio Types allow you to group together similar types of audio files.
The standard distinction here is between Sound and Music, whereby you
usually only want one Music file to be playing at any one time; whereas
you might have several simultaneous sound effects.</p>
<p>Double-click on an Audio Type and it will open up; you can see its
properties in the Property Grid. Here, the “MaxChannels” setting allows
you to specify how many audio clips of this type are allowed to play at
the same time. The “VolumeReductionWhenSpeechPlaying” setting allows you
to have AGS automatically reduce the volume of these audio clips while
speech is playing, to make it easier for the player to hear the speech
over the background music.</p>
<p>You’ll probably find that the default settings here are fine, and in
many games you won’t need to change them.</p>
<p><strong>Importing audio files</strong></p>
<p>Now let’s get on to the important question – how do you add sound and
music to your game? Well, if you right-click on the “Sound” or “Music”
folders (or any other folders that you create yourself), you’ll see an
option called “Add Audio Files”.</p>
<p>Select this option, and you’ll be given a dialog box to find the audio
files that you want to import. Once imported, they’ll be assigned script
names automatically.</p>
<p>Double-click an audio file in the project tree to open a window where
you can preview it, as well as change its properties in the Property
Grid.</p>
<p><strong>Playing audio in the game</strong></p>
<p>The script to play an audio clip in the game is very simple. For
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">aExplosion</span><span class="o">.</span><span class="n">Play</span><span class="p">();</span>
</pre></div>
</div>
<p>plays the audio clip called <em>aExplosion</em>.</p>
<p><strong>Priorities and channels</strong></p>
<p>AGS currently has an 8-channel audio system, which means that up to 8
sounds can be playing at the same time. With the default Audio Types
settings, one channel is reserved for speech, one for music and one for
ambient sounds; thus leaving 5 available for sound effects.</p>
<p>If you try to play an audio clip and there are no channels available,
then an existing one will be stopped and the new one will take its
place. However, this will only happen if the new audio clip has an
<strong>equal or higher</strong> priority than one of the currently playing sounds.</p>
<p>Thus, the priority allows you to decide which audio clips are more
important than others. For example, you might set a footstep sound as
low priority, and a door opening as high priority. This can be
configured at the folder level in the editor, and also by changing the
properties of an individual audio clip (by default they will inherit
from their containing folder).</p>
<p>Sometimes you might not want the priority of the sound to be fixed in
the editor – you might want to decide it at run-time in the script. For
this reason the <em>Play</em> command has an optional parameter which allows
you to explicity specify the priority when you play it, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">aExplosion</span><span class="o">.</span><span class="n">Play</span><span class="p">(</span><span class="n">eAudioPriorityLow</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Seeking and changing volume</strong></p>
<p>So, how do you change a sound once it is playing? Well, there are no
methods on the Audio Clip to do this, because you might be playing two
copies of the same sound at once, and then AGS wouldn’t know which one
you wanted to access. That’s where <strong>Audio Channels</strong> come to the
rescue.</p>
<p>When you use the Play() command, AGS returns to you an AudioChannel*
instance representing the channel on which the sound is playing. You can
store this to a global variable and access it later on. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AudioChannel</span><span class="o">*</span> <span class="n">chan</span> <span class="o">=</span> <span class="n">aExplosion</span><span class="o">.</span><span class="n">Play</span><span class="p">();</span>
<span class="n">chan</span><span class="o">.</span><span class="n">Volume</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
</pre></div>
</div>
<p>This will start the <em>aExplosion</em> audio clip playing, and then change its
volume to <code class="docutils literal notranslate"><span class="pre">20%</span></code>.</p>
<p><strong>Using Audio Channels</strong></p>
<p>Supposing you want to start playing a sound now, and then change its
volume or panning later on. How would you do that? Well, you’d need to
keep the AudioChannel around, so that you can access it later. The
easiest way to do that is to make it a Global Variable; if you open the
Global Variables editor, you can create a new AudioChannel* variable
(let’s call it <em>longWindedSound</em>). Then when you play the sound you set
it like this:</p>
<p><code class="docutils literal notranslate"><span class="pre">longWindedSound</span> <span class="pre">=</span> <span class="pre">aExplosion.Play();</span></code></p>
<p>later on, elsewhere in the script, you can change the volume by doing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">longWindedSound</span> <span class="o">!=</span> <span class="n">null</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">longWindedSound</span><span class="o">.</span><span class="n">Volume</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note the check for null here – this makes sure that your game won’t
crash if the sound isn’t playing (it might have finished, or not have
been started yet).</p>
<p><strong>Overall system volume</strong></p>
<p>There is a property called <a class="reference external" href="System#volume">System.Volume</a> that
controls the overall game volume, which you can use with some sort of
volume control slider for the player. All individual sound volumes work
within the overall system volume.</p>
<p><strong>Conclusion</strong></p>
<p>The new audio system in AGS gives you much more control over your game
audio. Please see the following sections for a complete list of the
supported commands:</p>
<p><a class="reference external" href="AudioClip">AudioClip reference</a>, <a class="reference external" href="AudioChannel#audiochannelcommands">AudioChannel
reference</a></p>
<p><a class="reference external" href="#voice-speech">Voice speech</a><br>
<a class="reference external" href="#the-audiocache-folder">The AudioCache folder</a></p>
<hr class="docutils" />
<div class="section" id="voice-speech">
<span id="voice-speech"></span><h2>Voice speech<a class="headerlink" href="#voice-speech" title="Permalink to this headline">¶</a></h2>
<p>With AGS you can link a line of dialog to a speech file, to enable
“talkie”- style games. Suppose you have a dialog script with the
following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ego</span><span class="p">:</span> <span class="s2">&quot;Hi! How are you?&quot;</span>
<span class="n">michael</span><span class="p">:</span> <span class="s2">&quot;I&#39;m fine.&quot;</span>
</pre></div>
</div>
<p>Normally this would display the words in the speech text above the
characters heads. However, you can add the special character ‘&amp;’ to
symbolise that a voice file should also be played.</p>
<p>The file name has format XXXXY.EXT, where XXXX is made of up to <strong>first
four letters</strong> of the character’s script name (except the leading ‘c’),
the Y is the speech file number (with no leading or trailing zeroes or
padding of any kind), and EXT is the file extension.</p>
<p>For example, if you have dialog script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ego</span><span class="p">:</span> <span class="o">&amp;</span><span class="mi">10</span> <span class="s2">&quot;Hi! How are you?&quot;</span>
<span class="n">michael</span><span class="p">:</span> <span class="o">&amp;</span><span class="mi">7</span> <span class="s2">&quot;I&#39;m fine.&quot;</span>
</pre></div>
</div>
<p>or common script using Say script function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cEgo</span><span class="o">.</span><span class="n">Say</span><span class="p">(</span><span class="s2">&quot;&amp;10 Hi! How are you?&quot;</span><span class="p">);</span>
<span class="n">cMichael</span><span class="o">.</span><span class="n">Say</span><span class="p">(</span><span class="s2">&quot;&amp;7 I&#39;m fine.&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Both of those examples would play EGO10.WAV with the first line, and
MICH7.WAV with the second. When a line of text has a voice linked to it,
the text on the screen will not be removed until the voice file has
finished playing. If the player interrupts it by clicking the mouse or
pressing a key, the text and voice will be stopped. Voice files must be
placed in the “Speech” sub-directory of the game folder.</p>
<p><strong>NOTE:</strong> WAV, OGG and MP3 format files can be used for speech.</p>
<p><strong>NOTE:</strong> You cannot use speech file numbers above 9999. That is, you
can have EGO1.OGG all the way up to EGO9999.OGG, but not EGO10000.OGG or
higher.</p>
<p>Speech is compiled into a file called SPEECH.VOX and is separate from
the rest of your game data so that you can offer it as an optional extra
download to the player. The game will function correctly if the file is
not present.</p>
<p><em>SeeAlso:</em> <a class="reference external" href="Speech#voicemode">Speech.VoiceMode</a></p>
</div>
<hr class="docutils" />
<div class="section" id="the-audiocache-folder">
<span id="the-audiocache-folder"></span><h2>The AudioCache folder<a class="headerlink" href="#the-audiocache-folder" title="Permalink to this headline">¶</a></h2>
<p>When you import audio files into AGS, you’ll probably notice that a
folder inside your game folder, called AudioCache, starts to fill up
with files. What is it and why is it there?</p>
<p>Well, when you import audio into AGS, you might be importing it from
anywhere – it could be off your hard drive, but it might also be off a
USB stick or a CD. AGS can’t rely on the audio files always being there
because you might remove the USB stick or delete the files on it.</p>
<p>Therefore, when you import audio into AGS it makes a copy of the file in
the AudioCache folder. AGS also remembers where the file came from, and
when you compile your game it will check if the file has been updated in
its original location – if so it will copy the latest version to the
AudioCache.</p>
<p>But if the source file no longer exists, your game will continue to
build just fine because AGS has its own copy of the file.</p>
<p>This allows AGS to stick to one of its core principles, that all the
files you need to build your game are within the game’s folder. That
way, you have complete security in knowing that by backing up your game
folder, your game will be safe if the worst happens.</p>
</div>
</div>


    </div>
      
  </div>
</div>
    

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018, AGS Team.<br/>
      Last updated on Jul 29, 2018, 3:26:19 PM.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.<br/>
    </p>
  </div>
</footer>
    

  </body>
</html>