<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Custom dialog options rendering &#8212; AGSHelp 3.4.1 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          AGS Manual</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="http://adventuregamestudio.co.uk/forums/index.php">AGS Forums</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">AGS Manual <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tutorial.html">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="StartingOff.html">Starting off</a></li>
<li class="toctree-l2"><a class="reference internal" href="Settingupthegame.html">Setting up the game</a></li>
<li class="toctree-l2"><a class="reference internal" href="AdvancedRoomFeatures.html">Advanced room features</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="EditorRoom.html">Room Editor</a><ul>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#background">Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#show-this-room-s-control">Show this room’s control</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#properties-control">Properties control</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#edges">Edges</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#characters">Characters</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#objects">Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#hotspot">Hotspot</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#walkable-areas">Walkable areas</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#walk-behinds">Walk-behinds</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditorRoom.html#regions">Regions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="EditorCharacter.html">Character Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="EditingGUIs.html">GUI Editor</a><ul>
<li class="toctree-l2"><a class="reference internal" href="EditingGUIs.html#gui-buttons">GUI buttons</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditingGUIs.html#interface-text">Interface text</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditingGUIs.html#customized-text-windows">Customized Text Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditingGUIs.html#custom-inventory">Custom inventory</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditingGUIs.html#sliders">Sliders</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditingGUIs.html#text-boxes">Text Boxes</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditingGUIs.html#list-boxes">List Boxes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="EditorSprite.html">Sprite Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="EditorView.html">View Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="EditorInventoryItems.html">Inventory Items Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="OtherFeatures.html">Other Features</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="RuntimeEngine.html">The run-time engine</a><ul>
<li class="toctree-l2"><a class="reference internal" href="TheDemoGame.html">The demo game</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="GraphicsDriver.html">Graphics driver selection</a></li>
<li class="toctree-l1"><a class="reference internal" href="Setup.html">Engine Setup Program</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ScriptingLanguage.html">Scripting Language</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ScriptingTutorialPart1.html">Scripting tutorial part 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="ScriptingTutorialPart2.html">Scripting tutorial part 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="Pointers.html">Pointers in AGS</a></li>
<li class="toctree-l2"><a class="reference internal" href="CallingGlobalFunctions.html">Calling global functions from local scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="TheScriptHeader.html">The script header</a></li>
<li class="toctree-l2"><a class="reference internal" href="StringFormats.html">String formatting</a></li>
<li class="toctree-l2"><a class="reference internal" href="ScriptModules.html">Multiple Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="BlockingScripts.html">Understanding blocking scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="DynamicArrays.html">Dynamic Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="ExtenderFunctions.html">Extender functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Gamevariables.html">Game variables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Scripting.html">Scripting Api</a></li>
<li class="toctree-l1"><a class="reference internal" href="Reference.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="EventTypes.html">Event Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="SystemLimits.html">System limits</a></li>
<li class="toctree-l2"><a class="reference internal" href="KeyboardShortcuts.html">Keyboard Shortcuts</a></li>
<li class="toctree-l2"><a class="reference internal" href="ASCIIcodes.html">ASCII code table</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="UpgradingFromPreviousVersion.html">Upgrading from a previous version</a><ul>
<li class="toctree-l2"><a class="reference internal" href="UpgradingTo27.html">Upgrading to AGS 2.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpgradingTo271.html">Upgrading to AGS 2.71</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpgradeTo30.html">Upgrading to AGS 3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpgradeTo31.html">Upgrading to AGS 3.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpgradeTo32.html">Upgrading to AGS 3.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpgradeTo33.html">Upgrading to AGS 3.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpgradeTo335.html">Upgrading to AGS 3.3.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpgradeTo34.html">Upgrading to AGS 3.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpgradeTo341.html">Upgrading to AGS 3.4.1</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Copyright.html">Copyright and terms of use</a></li>
<li class="toctree-l1"><a class="reference internal" href="AnonymousUsageInfo.html">Anonymous usage information</a></li>
<li class="toctree-l1"><a class="reference internal" href="Credits.html">Credits</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ContactingTheDevelopers.html">Contacting the developers</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Custom dialog options rendering</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/CustomDialogOptions.md.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="custom-dialog-options-rendering">
<span id="custom-dialog-options-rendering"></span><h1>Custom dialog options rendering<a class="headerlink" href="#custom-dialog-options-rendering" title="Permalink to this headline">¶</a></h1>
<p>By default, AGS comes with two types of dialog options – displaying
them using the size and position of an existing GUI, or creating a text
window to display the options in.</p>
<p>As of AGS 3.1, if neither of these methods suit you (for example,
because you want to use picture-based dialog options, or you want to add
scroll arrows), you can now implement the dialog options display
yourself in the script.</p>
<p><strong>NOTE:</strong> This topic involves some advanced scripting. If you’re just
starting out with AGS, please just use one of the built-in dialog option
styles for now, and come back to this later when you’re comfortable with
scripting.</p>
<p>To write your custom dialog options code, you need to do the following:</p>
<ul class="simple">
<li>Add a <code class="docutils literal notranslate"><span class="pre">dialog_options_get_dimensions</span></code> function to your script (an
example follows). This function is called by AGS to find out which
part of the screen you will be drawing onto. By setting the width
and height to values greater than 0, the custom dialog system
is activated.</li>
<li>Add a <code class="docutils literal notranslate"><span class="pre">dialog_options_render</span></code> function, which is called by AGS when
it needs to draw the dialog options. A standard script
<a class="reference external" href="DrawingSurfaceFunctions">DrawingSurface</a> is supplied,
which you can use to draw onto.</li>
<li>Optionally, add a <code class="docutils literal notranslate"><span class="pre">dialog_options_mouse_click</span></code> function. This is
called by AGS if the player clicks the mouse anywhere on dialog
options GUI. You might want to use this to process clicks on dialog
options, and also on some custom scroll arrows, for example.</li>
<li>Optionally, add a <code class="docutils literal notranslate"><span class="pre">dialog_options_key_press</span></code> function. This is
called by AGS if the player presses any key while custom dialog
options are shown on screen. You can use this to implement
key-controlled selection of dialog option, for example.</li>
<li>Optionally, add a <code class="docutils literal notranslate"><span class="pre">dialog_options_repexec</span></code> function. This works
similarily to general <code class="docutils literal notranslate"><span class="pre">repeatedly_execute</span></code> function, but is called
only if custom dialog options are shown on screen. You may use this
to handle any other situations, such as determining which option the
mouse is currently hovering over, or scripting time-related actions.</li>
</ul>
<p>These functions don’t have to go in the global script; you can put them
in any script you like. However, beware that if the functions are
present in more than one script they could interfere with each other and
cause problems.</p>
<p><strong>COMPATIBILITY NOTE:</strong> The older versions of AGS (pre-3.4.0) supported
slightly different set of functions. Thus, there was no
<code class="docutils literal notranslate"><span class="pre">dialog_options_repexec</span></code>, but you had to add <code class="docutils literal notranslate"><span class="pre">dialog_options_get_active</span></code>
function instead, in which you set active option property. Clicks on the
options were processed by AGS automatically, so doing this was
essential. If you have imported older project and want to keep old
dialog option scripts, then you should go to General Settings and enable
“Use old-style dialog options rendering API”.</p>
<p><strong>IMPORTANT:</strong> When adding the functions to the script, they all take in
a parameter of type <a class="reference external" href="DialogOptionsRenderingInfo">DialogOptionsRenderingInfo</a>.
The dialog_options_mouse_click function has an extra parameter for
the mouse button, and dialog_options_key_press has an extra parameter
for the key code. See the example below.</p>
<p><strong>IMPORTANT:</strong> All of the Custom Dialog functions run on the
non-blocking thread. That means that you should not make any blocking
calls, such as Character.Say, Wait or Display within them, as they may
not behave correctly.</p>
<p><strong>Example A. Classic mouse controls</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">dlg_opt_color</span> <span class="o">=</span> <span class="mi">14</span><span class="p">;</span>
<span class="nb">int</span> <span class="n">dlg_opt_acolor</span> <span class="o">=</span> <span class="mi">13</span><span class="p">;</span>
<span class="nb">int</span> <span class="n">dlg_opt_ncolor</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>

<span class="n">function</span> <span class="n">dialog_options_get_dimensions</span><span class="p">(</span><span class="n">DialogOptionsRenderingInfo</span> <span class="o">*</span><span class="n">info</span><span class="p">)</span>
<span class="p">{</span>
  <span class="o">//</span> <span class="n">Create</span> <span class="n">a</span> <span class="mi">200</span><span class="n">x200</span> <span class="n">dialog</span> <span class="n">options</span> <span class="n">area</span> <span class="n">at</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
  <span class="n">info</span><span class="o">.</span><span class="n">X</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>
  <span class="n">info</span><span class="o">.</span><span class="n">Y</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
  <span class="n">info</span><span class="o">.</span><span class="n">Width</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
  <span class="n">info</span><span class="o">.</span><span class="n">Height</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
  <span class="o">//</span> <span class="n">Enable</span> <span class="n">alpha</span> <span class="n">channel</span> <span class="k">for</span> <span class="n">the</span> <span class="n">drawing</span> <span class="n">surface</span>
  <span class="n">info</span><span class="o">.</span><span class="n">HasAlphaChannel</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
  <span class="o">//</span> <span class="n">Put</span> <span class="n">the</span> <span class="n">text</span> <span class="n">parser</span> <span class="n">at</span> <span class="n">the</span> <span class="n">bottom</span> <span class="p">(</span><span class="k">if</span> <span class="n">enabled</span><span class="p">)</span>
  <span class="n">info</span><span class="o">.</span><span class="n">ParserTextBoxX</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
  <span class="n">info</span><span class="o">.</span><span class="n">ParserTextBoxY</span> <span class="o">=</span> <span class="mi">160</span><span class="p">;</span>
  <span class="n">info</span><span class="o">.</span><span class="n">ParserTextBoxWidth</span> <span class="o">=</span> <span class="mi">180</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">function</span> <span class="n">dialog_options_render</span><span class="p">(</span><span class="n">DialogOptionsRenderingInfo</span> <span class="o">*</span><span class="n">info</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">info</span><span class="o">.</span><span class="n">Surface</span><span class="o">.</span><span class="n">Clear</span><span class="p">(</span><span class="n">dlg_opt_color</span><span class="p">);</span>
  <span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>  <span class="n">ypos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="o">//</span> <span class="n">Render</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">options</span> <span class="n">that</span> <span class="n">are</span> <span class="n">enabled</span>
  <span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">info</span><span class="o">.</span><span class="n">DialogToRender</span><span class="o">.</span><span class="n">OptionCount</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">DialogToRender</span><span class="o">.</span><span class="n">GetOptionState</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="n">eOptionOn</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">ActiveOptionID</span> <span class="o">==</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">info</span><span class="o">.</span><span class="n">Surface</span><span class="o">.</span><span class="n">DrawingColor</span> <span class="o">=</span> <span class="n">dlg_opt_acolor</span><span class="p">;</span>
      <span class="k">else</span>
        <span class="n">info</span><span class="o">.</span><span class="n">Surface</span><span class="o">.</span><span class="n">DrawingColor</span> <span class="o">=</span> <span class="n">dlg_opt_ncolor</span><span class="p">;</span>

      <span class="n">info</span><span class="o">.</span><span class="n">Surface</span><span class="o">.</span><span class="n">DrawStringWrapped</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">ypos</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">Width</span> <span class="o">-</span> <span class="mi">10</span><span class="p">,</span>
              <span class="n">eFontFont0</span><span class="p">,</span> <span class="n">eAlignLeft</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">DialogToRender</span><span class="o">.</span><span class="n">GetOptionText</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
      <span class="n">ypos</span> <span class="o">+=</span> <span class="n">GetTextHeight</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">DialogToRender</span><span class="o">.</span><span class="n">GetOptionText</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">eFontFont0</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">Width</span> <span class="o">-</span> <span class="mi">10</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">i</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">function</span> <span class="n">dialog_options_repexec</span><span class="p">(</span><span class="n">DialogOptionsRenderingInfo</span> <span class="o">*</span><span class="n">info</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">info</span><span class="o">.</span><span class="n">ActiveOptionID</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">mouse</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">info</span><span class="o">.</span><span class="n">Y</span> <span class="o">||</span> <span class="n">mouse</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;=</span> <span class="n">info</span><span class="o">.</span><span class="n">Y</span> <span class="o">+</span> <span class="n">info</span><span class="o">.</span><span class="n">Height</span> <span class="o">||</span>
      <span class="n">mouse</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">info</span><span class="o">.</span><span class="n">X</span> <span class="o">||</span> <span class="n">mouse</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="n">info</span><span class="o">.</span><span class="n">X</span> <span class="o">+</span> <span class="n">info</span><span class="o">.</span><span class="n">Width</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span> <span class="o">//</span> <span class="k">return</span> <span class="k">if</span> <span class="n">the</span> <span class="n">mouse</span> <span class="ow">is</span> <span class="n">outside</span> <span class="n">UI</span> <span class="n">bounds</span>
  <span class="p">}</span>

  <span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ypos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="o">//</span> <span class="n">Find</span> <span class="n">the</span> <span class="n">option</span> <span class="n">that</span> <span class="n">corresponds</span> <span class="n">to</span> <span class="n">where</span> <span class="n">the</span> <span class="n">mouse</span> <span class="n">cursor</span> <span class="ow">is</span>
  <span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">info</span><span class="o">.</span><span class="n">DialogToRender</span><span class="o">.</span><span class="n">OptionCount</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">DialogToRender</span><span class="o">.</span><span class="n">GetOptionState</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="n">eOptionOn</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="n">ypos</span> <span class="o">+=</span> <span class="n">GetTextHeight</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">DialogToRender</span><span class="o">.</span><span class="n">GetOptionText</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">eFontFont0</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">Width</span> <span class="o">-</span> <span class="mi">10</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">((</span><span class="n">mouse</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">info</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">ypos</span><span class="p">)</span>
      <span class="p">{</span>
        <span class="n">info</span><span class="o">.</span><span class="n">ActiveOptionID</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">i</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">function</span> <span class="n">dialog_options_mouse_click</span><span class="p">(</span><span class="n">DialogOptionsRenderingInfo</span> <span class="o">*</span><span class="n">info</span><span class="p">,</span> <span class="n">MouseButton</span> <span class="n">button</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">ActiveOptionID</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">info</span><span class="o">.</span><span class="n">RunActiveOption</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The examples above are slightly naive; in reality you would probably
want to track the Y position of each option in a variable to save having
to continually scan through all the options.</p>
<p><strong>Example B. Keyboard controls</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">dlg_opt_color</span> <span class="o">=</span> <span class="mi">14</span><span class="p">;</span>
<span class="nb">int</span> <span class="n">dlg_opt_acolor</span> <span class="o">=</span> <span class="mi">13</span><span class="p">;</span>
<span class="nb">int</span> <span class="n">dlg_opt_ncolor</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>

<span class="n">function</span> <span class="n">dialog_options_get_dimensions</span><span class="p">(</span><span class="n">DialogOptionsRenderingInfo</span> <span class="o">*</span><span class="n">info</span><span class="p">)</span>
<span class="p">{</span>
  <span class="o">//</span> <span class="n">Create</span> <span class="n">a</span> <span class="mi">200</span><span class="n">x200</span> <span class="n">dialog</span> <span class="n">options</span> <span class="n">area</span> <span class="n">at</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
  <span class="n">info</span><span class="o">.</span><span class="n">X</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>
  <span class="n">info</span><span class="o">.</span><span class="n">Y</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
  <span class="n">info</span><span class="o">.</span><span class="n">Width</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
  <span class="n">info</span><span class="o">.</span><span class="n">Height</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
  <span class="n">info</span><span class="o">.</span><span class="n">ActiveOptionID</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="o">//</span> <span class="nb">set</span> <span class="n">to</span> <span class="n">first</span> <span class="n">option</span>
<span class="p">}</span>

<span class="n">function</span> <span class="n">dialog_options_render</span><span class="p">(</span><span class="n">DialogOptionsRenderingInfo</span> <span class="o">*</span><span class="n">info</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">info</span><span class="o">.</span><span class="n">Surface</span><span class="o">.</span><span class="n">Clear</span><span class="p">(</span><span class="n">dlg_opt_color</span><span class="p">);</span>
  <span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>  <span class="n">ypos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="o">//</span> <span class="n">Render</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">options</span> <span class="n">that</span> <span class="n">are</span> <span class="n">enabled</span>
  <span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">info</span><span class="o">.</span><span class="n">DialogToRender</span><span class="o">.</span><span class="n">OptionCount</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">DialogToRender</span><span class="o">.</span><span class="n">GetOptionState</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="n">eOptionOn</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">ActiveOptionID</span> <span class="o">==</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">info</span><span class="o">.</span><span class="n">Surface</span><span class="o">.</span><span class="n">DrawingColor</span> <span class="o">=</span> <span class="n">dlg_opt_acolor</span><span class="p">;</span>
      <span class="k">else</span>
        <span class="n">info</span><span class="o">.</span><span class="n">Surface</span><span class="o">.</span><span class="n">DrawingColor</span> <span class="o">=</span> <span class="n">dlg_opt_ncolor</span><span class="p">;</span>

      <span class="n">info</span><span class="o">.</span><span class="n">Surface</span><span class="o">.</span><span class="n">DrawStringWrapped</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">ypos</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">Width</span> <span class="o">-</span> <span class="mi">10</span><span class="p">,</span>
          <span class="n">eFontFont0</span><span class="p">,</span> <span class="n">eAlignLeft</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">DialogToRender</span><span class="o">.</span><span class="n">GetOptionText</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
      <span class="n">ypos</span> <span class="o">+=</span> <span class="n">GetTextHeight</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">DialogToRender</span><span class="o">.</span><span class="n">GetOptionText</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">eFontFont0</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">Width</span> <span class="o">-</span> <span class="mi">10</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">i</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">function</span> <span class="n">dialog_options_key_press</span><span class="p">(</span><span class="n">DialogOptionsRenderingInfo</span> <span class="o">*</span><span class="n">info</span><span class="p">,</span> <span class="n">eKeyCode</span> <span class="n">keycode</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">keycode</span> <span class="o">==</span> <span class="n">eKeyUpArrow</span> <span class="o">&amp;&amp;</span> <span class="n">info</span><span class="o">.</span><span class="n">ActiveOptionID</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">info</span><span class="o">.</span><span class="n">ActiveOptionID</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">ActiveOptionID</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">keycode</span> <span class="o">==</span> <span class="n">eKeyDownArrow</span> <span class="o">&amp;&amp;</span> <span class="n">info</span><span class="o">.</span><span class="n">ActiveOptionID</span> <span class="o">&lt;</span> <span class="n">info</span><span class="o">.</span><span class="n">DialogToRender</span><span class="o">.</span><span class="n">OptionCount</span><span class="p">)</span>
    <span class="n">info</span><span class="o">.</span><span class="n">ActiveOptionID</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">ActiveOptionID</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">keycode</span> <span class="o">==</span> <span class="n">eKeyReturn</span> <span class="o">||</span> <span class="n">keycode</span> <span class="o">==</span> <span class="n">eKeySpace</span><span class="p">)</span>
    <span class="n">info</span><span class="o">.</span><span class="n">RunActiveOption</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For more detail on the commands used here, see the <a class="reference external" href="DialogOptionsRenderingInfo">DialogOptionsRenderingInfo</a> page.</p>
<p><em>Compatibility:</em> Supported by <strong>AGS 3.1.0</strong> and later versions.</p>
</div>


    </div>
      
  </div>
</div>
    

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018, AGS Team.<br/>
      Last updated on Jul 29, 2018, 9:13:17 PM.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.<br/>
    </p>
  </div>
</footer>
    

  </body>
</html>