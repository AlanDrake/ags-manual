<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>The text parser &#8212; AGSHelp 3.4.1 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          AGS Manual</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="http://adventuregamestudio.co.uk/forums/index.php">AGS Forums</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">AGS Manual <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">The text parser</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/TextParser.md.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="the-text-parser">
<span id="the-text-parser"></span><h1>The text parser<a class="headerlink" href="#the-text-parser" title="Permalink to this headline">¶</a></h1>
<p>You can now use a text parser in your games if you wish to, much as the
older Sierra games did. Go to the “Text parser” pane in the editor.
There, you will see a short list of words which are provided for you.
Each word has a number beside it.</p>
<p>Basically, you add words you want to use by right-clicking the list, and
selecting “Add word”. However, the real beauty of the parser is its
ability to recognise synonyms - that is, two words that mean the same
thing. So, for example, if you wanted the player to type “look at
fence”, they might well type “look at wall” instead, if that’s how they
see the drawing. Or, a British person might type “colour” whereas an
American might type “color”, both of which should have the same effect.</p>
<p>To add a synonym for an existing word, highlight the current word,
right-click it and choose “Add synonym”. You’ll notice that the new word
is given the same number as the old one. All words with the same number
are considered identical by the parser.</p>
<p>You will notice that the provided list has a lot of words with number 0.
This is a special number, that indicates that the parser should ignore
the word completely. In our previous example, the player might type
“look at the fence”, “look at fence”, or just “look fence”. By adding
words like “at” and “the” to the ignore list, they get stripped out of
the user’s input automatically. To add new ignore words, just select an
existing one and add a synonym.</p>
<p>So, how do you use the text parser? Well, you’ll need a text box GUI
control somewhere in order for the user to type in their input, or you
could just use the InputBox command (but it has quite a short line
length).</p>
<p>When the user has typed in their text (you’ll probably know this by the
text box’s event being activated), you call the Parser.ParseText script
function which tells AGS what input string to use in subsequent
commands. You then simply use the Said command to test what the player
typed in.</p>
<p>You type the whole sentence (but NOT including any ignore words), and
AGS will compare it to the user’s string, considering all synonyms
identical. For example (assuming our text box is called “txtUserInput”):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">String</span> <span class="nb">input</span> <span class="o">=</span> <span class="n">txtUserInput</span><span class="o">.</span><span class="n">Text</span><span class="p">;</span>
  <span class="n">Parser</span><span class="o">.</span><span class="n">ParseText</span><span class="p">(</span><span class="nb">input</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">Parser</span><span class="o">.</span><span class="n">Said</span><span class="p">(</span><span class="s2">&quot;look fence&quot;</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">Display</span><span class="p">(</span><span class="s2">&quot;It&#39;s an old wooden fence.&quot;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">Parser</span><span class="o">.</span><span class="n">Said</span><span class="p">(</span><span class="s2">&quot;eat apple&quot;</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">Display</span><span class="p">(</span><span class="s2">&quot;You&#39;d love to, but you don&#39;t have one.&quot;</span><span class="p">);</span>
  <span class="p">}</span>
</pre></div>
</div>
<p>There are a couple of special words you can use with the Said command.
“anyword” will match any word that the user types in. For example,
Said(“throw anyword away”) will match if they type “throw dagger away”,
or “throw trash away”. “rol” (short for Rest-of-Line) will match the
rest of the user’s input. So, you might want to do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">Parser</span><span class="o">.</span><span class="n">Said</span><span class="p">(</span><span class="s2">&quot;kill rol&quot;</span><span class="p">))</span> <span class="p">{</span>
  <span class="n">Display</span><span class="p">(</span><span class="s2">&quot;You&#39;re not a violent person.&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This way if they try to kill anything they will get the generic
response.</p>
<p>Sometimes, you want to accept two different words that are not synonyms
as the same thing. For example, the words “take” and “eat” normally have
totally different meanings, so you wouldn’t make them synonyms of each
other. However, if the player has a headache tablet, for instance, then
“take tablet” and “eat tablet” would both be valid. This is where the
comma “,” comes in - if you include a comma in your input, all synonyms
of all words separated by the comma will match. So:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">Parser</span><span class="o">.</span><span class="n">Said</span><span class="p">(</span><span class="s2">&quot;eat,take tablet&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>will match eat or take and all their synonyms, then tablet and its
synonyms.</p>
<p>Another fairly common task with a parser is to check for optional words</p>
<ul>
<li><p class="first">for example, if there is a brick wall on the screen, you want the
player to be able to type “look wall” and “look brick wall”. Although
this can be done with two OR’ed Said commands, AGS makes it easier. You
can use [brackets] to signify an optional word. So:</p>
<p>if (Parser.Said(“look [brick] wall”))</p>
</li>
</ul>
<p>will match “look wall” and “look brick wall”.</p>
<p>Now this is all very well, but in different rooms you have different
items to interact with - for example, in one room there might be a tree
that the player should be able to type “look at tree” to look at, and so
on. Putting all this in your global script would make a big mess. So,
enter the <a class="reference external" href="https://adventuregamestudio.github.io/ags-manual/Game#callroomscript">CallRoomScript</a> function. Using
this, you can do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">Parser</span><span class="o">.</span><span class="n">ParseText</span><span class="p">(</span><span class="nb">input</span><span class="p">);</span>
  <span class="n">String</span> <span class="n">badWord</span> <span class="o">=</span> <span class="n">Parser</span><span class="o">.</span><span class="n">SaidUnknownWord</span><span class="p">();</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">badWord</span> <span class="o">!=</span> <span class="n">null</span><span class="p">)</span>
    <span class="n">Display</span><span class="p">(</span><span class="s2">&quot;You can&#39;t use &#39;</span><span class="si">%s</span><span class="s2">&#39; in this game.&quot;</span><span class="p">,</span> <span class="n">badWord</span><span class="p">);</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">Parser</span><span class="o">.</span><span class="n">Said</span><span class="p">(</span><span class="s2">&quot;eat apple&quot;</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">Display</span><span class="p">(</span><span class="s2">&quot;You&#39;d love to, but you don&#39;t have one.&quot;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="o">...</span> <span class="o">//</span> <span class="n">other</span> <span class="n">game</span><span class="o">-</span><span class="n">wide</span> <span class="n">commands</span>
  <span class="k">else</span>
    <span class="n">CallRoomScript</span> <span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
<p>Then, the room script can check for things that the player can do in the
current room. See the <a class="reference external" href="https://adventuregamestudio.github.io/ags-manual/Game#callroomscript">CallRoomScript</a>
description for more information.</p>
</div>


    </div>
      
  </div>
</div>
<div class="footer">&copy;2018, AGS Team<br>build date: Jul 27, 2018, 4:06:19 AM</div>

  </body>
</html>